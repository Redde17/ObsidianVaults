La fase di ristrutturazione si suddivide in diverse fasi:

#### **Analisi delle ridondanze**
In questa fase vengono analizzate tutte le ridondanze che corrispondono a un dato che viene derivato da altri dati, quindi si scelgono i dati da mantenere e quelli da eliminare. Il vantaggio √® una riduzione degli accessi necessari per calcolare il dato derivato; gli svantaggi sono una maggiore occupazione di memoria (spesso √® un costo trascurabile) e la necessit√† di effettuare operazioni aggiuntive per tenere il dato aggiornato (un aggiornamento consiste sempre in una lettura e una scrittura, quindi 3 letture totali). La decisione di mantenere o eliminare una ridondanza va fatta sulla base delle operazioni che si vanno a fare sui dati ridondanti.

Si possono presentare varie forme di ridondanza: 
- attributi derivabili da altri attributi della stessa entit√†;
- attributi derivabili dagli attributi di altre entit√†;
- attributi derivabile operazioni di conteggio di occorrenze

#### Eliminazione delle generalizzazioni
Dato che i sistemi tradizionali per la gestione delle basi dati non consente di rappresentare una generalizzazione, dobbiamo trasformare questo con costrutto in entit√† e associazioni.
Abbiamo 3 alternative possibili:

1. Accorpamento delle entit√† figlie nell‚Äôentit√† padre: 
	le entit√† ùê∏1 ed ùê∏2 vengono eliminate e le loro propriet√† vengono aggiunte all‚Äôentit√† padre ùê∏0. Gli attributi delle entit√† figlie, ùê¥11 e ùê¥12, possono assumere valori nulli, perch√© non importanti per l‚Äôentit√† padre ùê∏0. 
	Questa soluzione pu√≤ essere utile quando la specializzazione √® PARZIALE e le entit√† figlie non hanno propriet√† particolari. In questo caso, anche se abbiamo uno spreco di memoria per la presenza di valori nulli, avremo un numero minore di accessi. 
	Se la generalizzazione √® totale la cardinalit√† minima sar√† 1, se √® parziale sar√† 0. Se la generalizzazione √® sovrapposta la cardinalit√† Massima sar√† N, se √® esclusiva sar√† 1. 
	
2. Accorpamento del padre con le entit√† figlie:
	l‚Äôentit√† genitore viene eliminata e, per la propriet√† dell‚Äôereditariet√†, i suoi attributi, il suo identificatore e le relazioni a cui l'entit√† partecipava, vengono aggiunti alle entit√† figlie. √à vantaggioso se le operazioni importanti fanno molta differenza tra le entit√† figlie. Questa soluzione √® possibile solo se la generalizzazione √® TOTALE. In questo caso le cardinalit√† non cambiano. In questo caso, avremo un risparmio della memoria perch√© gli attributi non assumono mai valori nulli e inoltre c‚Äô√® una riduzione degli accessi dato che non si deve visitare ùê∏0. 
	
3. Sostituzione della generalizzazione con associazioni: 
	la generalizzazione si trasforma in due associazioni (1,1) che legano rispettivamente l'entit√† genitore con le entit√† figlie che diventano entit√† deboli. Non ci sono trasferimenti di attributi o associazioni; vanno aggiunti dei vincoli: ogni occorrenza di ùê∏0 non pu√≤ partecipare contemporaneamente alle due relazioni. Questa scelta √® conveniente se la generalizzazione NON √® TOTALE e se le operazioni fanno differenza tra entit√† padre e figlie. In questo caso, avremo un risparmio della memoria per l‚Äôassenza di valori nulli, ma avremo un incremento degli accessi. Le cardinalit√† cambiano, infatti avremo: (1,1) per indicare l‚Äôesistenza di un‚Äôunica occorrenza; (0,1) per indicare se si ha un‚Äôoccorrenza di una o di un‚Äôaltra entit√†


#### Partizionamento/accorpamento di entit√† e associazioni
Le entit√† e le associazioni in uno schema E-R possono essere partizionati o accorpati per garantire una maggiore efficienza delle operazioni: gli accessi si riducono separando attributi di una stessa entit√† che vengono acceduti da operazioni diverse e raggruppando attributi di entit√† diverse che vengono accedute dalle stesse operazioni. 
- Partizionamento verticale: 
	si suddivide un'entit√† operando sui suoi attributi. 
	
- Partizionamento orizzontale: 
	la suddivisione avviene sulle occorrenze dell‚Äôentit√†. Per ogni operazione del genere si aggiunge una generalizzazione. I partizionamenti orizzontali hanno un problema, ovvero duplicano tutte le associazioni a cui l'entit√† originaria partecipa.

![[Pasted image 20230104182121.png]]

- Eliminazione Attributi Composti 
	Si eliminano perch√© nello schema relazionale non esistono attributi composti 

- Eliminazione Attributi Multivalore 
	Questa ristrutturazione √® necessaria perch√© il modello relazionale non permette di rappresentare in maniera diretta questo tipo di attributo. Quindi, un'entit√† viene legata ad un'altra entit√† tramite un‚Äôassociazione uno a molti.

- Accorpamento di entit√† 
	L‚Äôaccorpamento √® l'operazione inversa del partizionamento, infatti due entit√† legate da un‚Äôassociazione vengono accorpate in un'unica entit√† contenente gli attributi di entrambi. Un effetto collaterale di questa ristrutturazione la possibile presenza di valori nulli. Gli accorpamenti si effettuano su associazioni di tipo uno a uno mai su relazioni molti a molti
	![[Pasted image 20230104182337.png]]

#### Scelta degli identificatori principali
Questa scelta essenziale nelle traduzioni verso il modello relazionale virgola in modo da individuare una ‚Äúchiave primaria‚Äù sulla quale vengono costruite delle strutture ausiliarie, dette indici, per la raccolta dei dati. I criteri di decisione sono i seguenti: 
- Gli attributi con valori nulli non possono costituire identificatori principali. 
- Un identificatore composto da uno o da pochi attributi √® da preferire a identificatori costituiti da molti attributi. Questo infatti garantisce che gli indici siano di dimensioni ridotte, risparmiando memoria. 
- Un identificatore interno con pochi attributi √® da preferire ad un identificatore esterno che coinvolge diverse entit√†. 
- Un identificatore che viene utilizzato da molte operazioni per accedere alle occorrenze di un‚Äôentit√† √® da preferire rispetto agli altri.

Se nessuno degli identificatori soddisfa questi requisiti, √® possibile introdurre un attributo che conterr√† valori specifici, detti codici, generati per identificare le occorrenze dell‚Äôentit√†. E‚Äô consigliabile tenere traccia in questa fase anche di identificatori non selezionati che definiscono gli indici secondari.