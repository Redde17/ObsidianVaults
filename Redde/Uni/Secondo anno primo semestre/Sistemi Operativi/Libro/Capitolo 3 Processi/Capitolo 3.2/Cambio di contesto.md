Come spiegato nel [Paragrafo 1.2.1](obsidian://open?vault=Redde&file=Uni%2FSecondo%20anno%20primo%20semestre%2FSistemi%20Operativi%2FLibro%2FCapitolo%201%20-%20Introduzione%2FCapitolo%201.2%2FInterruzioni) le interruzioni forzano il sistema a sospendere il lavoro attuale della cpu per eseguire routine del kernel. Le interruzioni sono eventi comuni nei sistemi general-purpose. In presenza di una interruzione, il sistema deve salvare il contesto del processo corrente, per poterlo poi ripristinare quando il processo stesso potrà ritornare in esecuzione. 

Il contesto è rappresentato all’interno del [pcb](obsidian://open?vault=Redde&file=Uni%2FSecondo%20anno%20primo%20semestre%2FSistemi%20Operativi%2FLibro%2FCapitolo%203%2FCapitolo%203.1%2FBlocco%20di%20controllo%20del%20processo%20o%20PCB) del processo, e comprende i valori dei registri della cpu, lo stato del processo e informazioni relative alla gestione della memoria. 
In termini generali, si esegue un salvataggio dello stato corrente della cpu, sia che essa esegua in modalità utente o in modalità di sistema; in seguito, si attuerà un corrispondente ripristino dello stato per poter riprendere l’elaborazione dal punto in cui era stata interrotta.

Il passaggio della cpu a un nuovo processo implica il salvataggio dello stato del processo attuale e il ripristino dello stato del nuovo processo. Questa procedura è nota col nome di cambio di contesto (_context switch_) ed è mostrata nella seguente figura.
![[Pasted image 20221027153653.png]]

Nell’evenienza di un cambio di contesto, il sistema salva il contesto del processo uscente nel suo pcb e carica il contesto del processo subentrante, salvato in precedenza. 
Il cambio di contesto è puro [[overhead]], perché il sistema esegue solo operazioni volte alla gestione dei processi, e non alla computazione. Il tempo necessario varia da sistema a sistema, dipendendo dalla velocità della memoria, dal numero di registri da copiare e dall’esistenza di istruzioni macchina appropriate (per esempio, una singola istruzione per caricare o trasferire in memoria tutti i registri). In genere si tratta di qualche millisecondo.

La durata del cambio di contesto dipende molto dall’architettura; per esempio, alcune cpu sono dotate di più set di registri, quindi il cambio di contesto prevede la semplice modifica di un puntatore al gruppo di registri corrente. Naturalmente, se il numero dei processi attivi è maggiore di quello dei set di registri disponibili, il sistema rimedia copiando i dati dei registri nella e dalla memoria, come prima. Inoltre, più complesso è il sistema operativo, più lavoro si deve svolgere durante un cambio di contesto.